
<!-- README.md is generated from README.Rmd. Please edit that file -->

# meteoR

<!-- badges: start -->

[![R-CMD-check](https://github.com/thieled/meteoR/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/thieled/meteoR/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

meteoR is an unofficial R wrapper around the [OPTED Meteor
API](https://meteor.opted.eu/).

## Installation

You can install the development version of meteoR from
[GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("thieled/meteoR")
```

## Example

This is a basic example which shows you how to solve a common problem:

``` r
library(meteoR)

# Get the country uid from the API
countries <- call_meteor(method = "get",
                            ressource = "query",
                            type = "Country",
                            format = "dataframe",
                            n_max = Inf
)
#> 50 obs. + 50 obs. + 50 obs. + 50 obs. + 50 obs. + 2 obs.


countries_sel <- countries |> dplyr::filter(name %in% c("Austria",
                                                        "Germany",
                                                        "France",
                                                        "Italy"))
# Query the API for news sources from these countries
news_sources <- call_meteor(method = "get",
                            ressource = "query",
                            type = "NewsSource",
                            countries = countries_sel$uid,
                            geographic_scope = c("national", "multinational"),
                            format = "dataframe",
                            publication_kind = c("newspaper", "magazine"),
                            n_max = 50
)
#> 50 obs.


dplyr::glimpse(news_sources)
#> Rows: 50
#> Columns: 20
#> $ `_unique_name`           <chr> "newssource_it_20minuti_print", "newssource_f…
#> $ geographic_scope         <chr> "national", "national", "national", "national…
#> $ name                     <chr> "20 Minuti", "Alternatives Économiques", "Alt…
#> $ uid                      <chr> "0x249fc", "0x22321", "0x22323", "0x4201f", "…
#> $ wikidata_id              <chr> "Q7245532", "Q2840427", NA, "Q860331", NA, NA…
#> $ dgraph.type              <list> "NewsSource", "NewsSource", "NewsSource", "N…
#> $ alternate_names_1        <chr> "20minutes.fr", "Alter éco", "Alternatives éc…
#> $ alternate_names_2        <chr> "vingt minutes", "Alternatives economiques", …
#> $ alternate_names_3        <chr> NA, "Alternatives Economiques", NA, NA, NA, N…
#> $ channel__unique_name     <chr> "print", "print", "facebook", "print", "print…
#> $ channel_name             <chr> "Print", "Print", "Facebook", "Print", "Print…
#> $ channel_uid              <chr> "0x11", "0x11", "0xd", "0x11", "0x11", "0x11"…
#> $ publication_kind_1       <chr> "newspaper", "magazine", "magazine", "magazin…
#> $ publication_kind_2       <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
#> $ countries__unique_name_1 <chr> "country_italy", "country_france", "country_f…
#> $ countries__unique_name_2 <chr> NA, NA, NA, "country_switzerland", NA, NA, NA…
#> $ countries_name_1         <chr> "Italy", "France", "France", "Germany", "Germ…
#> $ countries_name_2         <chr> NA, NA, NA, "Switzerland", NA, NA, NA, NA, NA…
#> $ countries_uid_1          <chr> "0x2d", "0x2f", "0x2f", "0x1b", "0x1b", "0x1b…
#> $ countries_uid_2          <chr> NA, NA, NA, "0x32", NA, NA, NA, NA, NA, "0x32…


# Get more insights
view_df <- view_uid(uid = head(news_sources)$uid, 
                    format = "dataframe",
                    unnest_cutoff = 1)
#> 26 obs. 31 obs. 23 obs. 26 obs. 28 obs. 27 obs.

dplyr::glimpse(view_df)
#> Rows: 6
#> Columns: 49
#> $ `_date_created`                           <chr> "2022-06-30T14:44:00.682505+…
#> $ `_unique_name`                            <chr> "newssource_it_20minuti_prin…
#> $ contains_ads                              <chr> "yes", "yes", "NA", "yes", "…
#> $ date_founded                              <chr> "2011-01-01T00:00:00+00:00",…
#> $ defunct                                   <lgl> FALSE, FALSE, FALSE, TRUE, N…
#> $ entry_review_status                       <chr> "accepted", "accepted", "acc…
#> $ geographic_scope                          <chr> "national", "national", "nat…
#> $ name                                      <chr> "20 Minuti", "Alternatives É…
#> $ party_affiliated                          <chr> "NA", "NA", "NA", "NA", NA, …
#> $ payment_model                             <chr> "not free", "not free", NA, …
#> $ publication_cycle                         <chr> "daily", "monthly", "continu…
#> $ special_interest                          <lgl> FALSE, FALSE, FALSE, TRUE, F…
#> $ uid                                       <chr> "0x249fc", "0x22321", "0x223…
#> $ wikidata_id                               <chr> "Q7245532", "Q2840427", NA, …
#> $ audience_size_recent                      <int> NA, 74057, NA, NA, 1161910, …
#> $ `audience_size_recent|timestamp`          <chr> NA, "2020-01-01T00:00:00+00:…
#> $ `audience_size_recent|unit`               <chr> NA, "subscribers", NA, NA, "…
#> $ identifier                                <chr> NA, NA, "AlternativesEconomi…
#> $ verified_account                          <lgl> NA, NA, NA, FALSE, NA, NA
#> $ audience_size                             <list> "2022-06-30T00:00:00+00:00",…
#> $ publication_kind                          <list> "newspaper", "magazine", "m…
#> $ alternate_names                           <list> <NULL>, <NULL>, "Alternativ…
#> $ topical_focus                             <list> <NULL>, <NULL>, <NULL>, "ec…
#> $ `_edited_by__edited_by|timestamp`         <chr> "2022-12-19T11:35:52.197084…
#> $ `_edited_by_display_name`                 <chr> "Celina Dinhopl", "Celina Di…
#> $ `_edited_by_uid`                          <chr> "0x4e57", "0x4e57", "0x4e57"…
#> $ countries__unique_name                    <chr> "country_italy", "country_fr…
#> $ countries_entry_review_status             <chr> "accepted", "accepted", "acc…
#> $ countries_name                            <chr> "Italy", "France", "France",…
#> $ countries_uid                             <chr> "0x2d", "0x2f", "0x2f", NA, …
#> $ languages__unique_name                    <chr> "language_italian", "languag…
#> $ languages_entry_review_status             <chr> "accepted", "accepted", "acc…
#> $ languages_name                            <chr> "Italian", "French", "French…
#> $ languages_uid                             <chr> "0x37e2ed", "0x37e2bc", "0x3…
#> $ `audience_size|data_from_0`               <chr> NA, "https://en.wikipedia.or…
#> $ `audience_size|unit_0`                    <chr> NA, "subscribers", NA, NA, "…
#> $ related_news_sources__unique_name         <chr> NA, NA, NA, "newssource_de_b…
#> $ related_news_sources_entry_review_status  <chr> NA, NA, NA, "accepted", NA, …
#> $ related_news_sources_name                 <chr> NA, NA, NA, "bilanz.de", NA,…
#> $ related_news_sources_uid                  <chr> NA, NA, NA, "0x42020", NA, NA
#> $ `_edited_by_dgraph.type`                  <list> ["User"], ["User"], ["User"]…
#> $ countries_dgraph.type                     <list> ["Entry", "Country"], ["Entr…
#> $ languages_dgraph.type                     <list> ["Language", "Entry"], ["La…
#> $ `audience_size|count_0`                   <list> <NULL>, "74057", <NULL>, <N…
#> $ related_news_sources_countries            <list<tibble[,5]>> <NULL>, <NULL>, <NULL>, [<t…
#> $ related_news_sources_dgraph.type          <list> <NULL>, <NULL>, <NULL>, ["E…
#> $ related_news_sources_channel__unique_name <chr> NA, NA, NA, "website", NA, NA
#> $ related_news_sources_channel_name         <chr> NA, NA, NA, "Se…
#> $ related_news_sources_channel_uid          <chr> NA, NA, NA, "0x10", NA, NA
```
